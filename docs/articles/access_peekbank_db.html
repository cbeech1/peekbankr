<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Accessing `peekbank-db` • peekbankr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Accessing `peekbank-db`">
<meta property="og:description" content="peekbankr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">peekbankr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1.0000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/access_peekbank_db.html">Accessing `peekbank-db`</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://github.com/langcog/peekbankr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Accessing <code>peekbank-db</code>
</h1>
            
            <h4 class="date">2020-08-28</h4>
      
      <small class="dont-index">Source: <a href="http://github.com/langcog/peekbankr/blob/master/vignettes/access_peekbank_db.Rmd"><code>vignettes/access_peekbank_db.Rmd</code></a></small>
      <div class="hidden name"><code>access_peekbank_db.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>The <code>peekbankr</code> package allows you to access data in the peekbank-db from R. This removes the need to write complex SQL queries in order to get the information you want from the database. This vignette shows some examples of how to use the data loading functions and what the resulting data look like.</p>
<p>There are several different <code>get_</code> functions that you can use to extract different types of data from the peekbank-db:</p>
<ul>
<li><code><a href="../reference/get_datasets.html">get_datasets()</a></code></li>
<li><code><a href="../reference/get_subjects.html">get_subjects()</a></code></li>
<li><code><a href="../reference/get_administrations.html">get_administrations()</a></code></li>
<li><code><a href="../reference/get_trials.html">get_trials()</a></code></li>
<li><code><a href="../reference/get_stimuli.html">get_stimuli()</a></code></li>
<li><code><a href="../reference/get_aoi_region_sets.html">get_aoi_region_sets()</a></code></li>
<li><code><a href="../reference/get_aoi_timepoints.html">get_aoi_timepoints()</a></code></li>
<li><code><a href="../reference/get_xy_timepoints.html">get_xy_timepoints()</a></code></li>
</ul>
<p><strong>Technical note 1</strong>: You do not have to explicitly establish a connection to the peekbank-db since the <code>peekbankr</code> functions will manage these connections. But if you would like to establish your own connection, you can do so with <code><a href="../reference/connect_to_peekbank.html">connect_to_peekbank()</a></code> and pass it as an argument to any of the <code>get_</code> functions.</p>
<p><strong>Technical note 2</strong>: We have tried to optimize the time it takes to get data from the database. But if you try to query and get all of the timepoint tables, it will still take a long time as you are trying to get 100s of MB of data.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="co"># load the library</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">peekbankr</span>)</pre></body></html></div>
</div>
<div id="get-datasets" class="section level2">
<h2 class="hasAnchor">
<a href="#get-datasets" class="anchor"></a>Get datasets</h2>
<p>The <code>get_datasets</code> function returns a table related to the sources of the dataset, information of the tracker, information of the method (e.g., monitor size and sample rate).</p>
<p>For example, you can run <code>get_datasets</code> without any arguments to return all of the datasets in the database.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">d_datasets</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_datasets.html">get_datasets</a></span>()
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">d_datasets</span>)</pre></body></html></div>
<pre><code>## # A tibble: 2 x 5
##   dataset_id lab_dataset_id dataset_name   shortcite     cite                   
##        &lt;int&gt; &lt;chr&gt;          &lt;chr&gt;          &lt;chr&gt;         &lt;chr&gt;                  
## 1          0 SwitchingCues  pomper_saffra… Pomper &amp; Saf… "Pomper, R., &amp; Saffran…
## 2          1 reflook_v3     reflook_v3     ?             "?"</code></pre>
</div>
<div id="get-subjects" class="section level2">
<h2 class="hasAnchor">
<a href="#get-subjects" class="anchor"></a>Get Subjects</h2>
<p>The <code>get_subjects</code> function returns information about persistent subject identifiers for noting when subjects have participated in multiple experiments. This includes demographic information (currently only sex and lab-specific subject id).</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">d_subjects</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_subjects.html">get_subjects</a></span>()
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">d_subjects</span>)</pre></body></html></div>
<pre><code>## # A tibble: 6 x 3
##   subject_id sex    lab_subject_id
##        &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;         
## 1          0 female 319           
## 2          1 female 320           
## 3          2 male   321           
## 4          3 male   322           
## 5          4 male   323           
## 6          5 male   324</code></pre>
</div>
<div id="get-administrations" class="section level2">
<h2 class="hasAnchor">
<a href="#get-administrations" class="anchor"></a>Get Administrations</h2>
<p>The <code>get_administrations</code> function returns information about the specific experimental administrations to subjects in the database. This includes information about:</p>
<ul>
<li>age</li>
<li>monitor size</li>
<li>tracker</li>
</ul>
<p>Again, if you run the function with no arguments, then you get all the information for all administrations in the database, but you can now also filter on a dataset name or dataset id.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">d_administrations</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_administrations.html">get_administrations</a></span>(<span class="kw">dataset_name</span> <span class="kw">=</span> <span class="st">"pomper_saffran_2016"</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">d_administrations</span>)</pre></body></html></div>
<pre><code>## # A tibble: 6 x 12
##   administration_…   age lab_age lab_age_units monitor_size_x monitor_size_y
##              &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;                  &lt;int&gt;          &lt;int&gt;
## 1                0    46      46 months                    NA             NA
## 2                1    43      43 months                    NA             NA
## 3                2    47      47 months                    NA             NA
## 4                3    42      42 months                    NA             NA
## 5                4    43      43 months                    NA             NA
## 6                5    42      42 months                    NA             NA
## # … with 6 more variables: sample_rate &lt;dbl&gt;, tracker &lt;chr&gt;,
## #   coding_method &lt;chr&gt;, dataset_id &lt;int&gt;, subject_id &lt;int&gt;, dataset_name &lt;chr&gt;</code></pre>
<p>The age argument takes a number indicating the age(s) of children (in months) that you want to analyze. you can use this argument in two ways</p>
<ol style="list-style-type: decimal">
<li>Pass a single number to get information about all participants who were tested at that particular age.</li>
<li>Pass a range of ages to get information about all participants who were tested within a certain age range.</li>
</ol>
<p>For example, you can get the participant information for all of the children who were tested between the ages of 24 and 36 months.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">d_age_range</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_administrations.html">get_administrations</a></span>(<span class="kw">age</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">24</span>, <span class="fl">36</span>))
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">d_age_range</span>)</pre></body></html></div>
<pre><code>## # A tibble: 6 x 12
##   administration_…   age lab_age lab_age_units monitor_size_x monitor_size_y
##              &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;                  &lt;int&gt;          &lt;int&gt;
## 1               60    32    2.63 years                   1680           1050
## 2               64    29    2.40 years                   1680           1050
## 3               70    25    2.08 years                   1680           1050
## 4               71    36    3.03 years                   1680           1050
## 5               73    34    2.84 years                   1680           1050
## 6               74    26    2.13 years                   1680           1050
## # … with 6 more variables: sample_rate &lt;dbl&gt;, tracker &lt;chr&gt;,
## #   coding_method &lt;chr&gt;, dataset_id &lt;int&gt;, subject_id &lt;int&gt;, dataset_name &lt;chr&gt;</code></pre>
</div>
<div id="get-trials" class="section level2">
<h2 class="hasAnchor">
<a href="#get-trials" class="anchor"></a>Get trials</h2>
<p>The <code>get_trials</code> function returns a table with information of the trials in the experiments in the database. This includes the following information:</p>
<ul>
<li>Phrase</li>
<li>Language</li>
<li>Point of disambiguation</li>
<li>IDs to link to other tables.</li>
</ul>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="no">d_trials</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_trials.html">get_trials</a></span>()
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">d_trials</span>)</pre></body></html></div>
<pre><code>## # A tibble: 6 x 11
##   trial_id full_phrase full_phrase_lan… point_of_disamb… target_side
##      &lt;int&gt; &lt;chr&gt;       &lt;chr&gt;                       &lt;int&gt; &lt;chr&gt;      
## 1        0 Find the o… eng                             0 left       
## 2        1 Find the r… eng                             0 right      
## 3        2 Where is t… eng                             0 right      
## 4        3 Find the w… eng                             0 left       
## 5        4 Where is t… eng                             0 left       
## 6        5 Look at th… eng                             0 right      
## # … with 6 more variables: lab_trial_id &lt;chr&gt;, aoi_region_set_id &lt;int&gt;,
## #   dataset_id &lt;int&gt;, distractor_id &lt;int&gt;, target_id &lt;int&gt;, dataset_name &lt;chr&gt;</code></pre>
<p>This function also takes dataset name and id filters.</p>
</div>
<div id="get-stimuli" class="section level2">
<h2 class="hasAnchor">
<a href="#get-stimuli" class="anchor"></a>Get stimuli</h2>
<p>The <code>get_stimuli</code> function returns a table with information of the stimuli in the experiments in the database. This includes the following information:</p>
<ul>
<li>Label</li>
<li>Image</li>
<li>Novelty status</li>
</ul>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="no">d_stimuli</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_stimuli.html">get_stimuli</a></span>()
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">d_stimuli</span>)</pre></body></html></div>
<pre><code>## # A tibble: 6 x 7
##   stimulus_id stimulus_novelty stimulus_label stimulus_image_… lab_stimulus_id
##         &lt;int&gt; &lt;chr&gt;            &lt;chr&gt;          &lt;chr&gt;            &lt;chr&gt;          
## 1           0 familiar         orange         raw_data/stimul… slide          
## 2           1 familiar         red            raw_data/stimul… knife          
## 3           2 familiar         yellow         raw_data/stimul… zipper         
## 4           3 familiar         white          raw_data/stimul… flag           
## 5           4 familiar         red            raw_data/stimul… belt           
## 6           5 familiar         black          raw_data/stimul… tape           
## # … with 2 more variables: dataset_id &lt;int&gt;, dataset_name &lt;chr&gt;</code></pre>
<p>This function also takes dataset name and id filters.</p>
</div>
<div id="get-aoi-region-sets" class="section level2">
<h2 class="hasAnchor">
<a href="#get-aoi-region-sets" class="anchor"></a>Get AOI region sets</h2>
<p>The <code><a href="../reference/get_aoi_region_sets.html">get_aoi_region_sets()</a></code> returning a table with the information of the region of area of interest (AOI) for experiments using eye-trackers. It includes information of the dimensions of the x and y, such as the minimum and maximum dimension of the xy spaces.</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="no">d_aoi_region_sets</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_aoi_region_sets.html">get_aoi_region_sets</a></span>()
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">d_aoi_region_sets</span>)</pre></body></html></div>
<pre><code>## # A tibble: 1 x 9
##   aoi_region_set_… l_x_max l_x_min l_y_max l_y_min r_x_max r_x_min r_y_max
##              &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;
## 1                0     555       0     788     262    1680    1125     788
## # … with 1 more variable: r_y_min &lt;int&gt;</code></pre>
<p>This function is not expected to be used commonly - this information is retained as part of the process of calculating AOIs from XY points.</p>
</div>
<div id="get-aoi-timepoints" class="section level2">
<h2 class="hasAnchor">
<a href="#get-aoi-timepoints" class="anchor"></a>Get AOI timepoints</h2>
<p>The <code>get_aoi_timepoints</code> function returns a table with information of the subject’s looking behavior in each trial. For example, you can get information about which area that the subject was looking at in a particular trial (e.g., looking away or target or distractor).</p>
<ul>
<li>The <code>t_norm</code> field provides a trial-normalized time variable (milliseconds) whose 0 point is the point of disambiguation on that trial (first timestep of the onset of the first time the target label is said).</li>
</ul>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="no">d_aoi_timepoints</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_aoi_timepoints.html">get_aoi_timepoints</a></span>()
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">d_aoi_timepoints</span>)</pre></body></html></div>
<pre><code>## # A tibble: 6 x 5
##   aoi_timepoint_id aoi        t_norm administration_id trial_id
##              &lt;int&gt; &lt;chr&gt;       &lt;int&gt;             &lt;int&gt;    &lt;int&gt;
## 1                0 target       -990                 0        0
## 2                1 target       -990                 0        1
## 3                2 target       -990                 0        2
## 4                3 target       -990                 0        3
## 5                4 target       -990                 0        4
## 6                5 distractor   -990                 0        5</code></pre>
</div>
<div id="get-xy-timepoints" class="section level2">
<h2 class="hasAnchor">
<a href="#get-xy-timepoints" class="anchor"></a>Get XY timepoints</h2>
<p>For experiments using eye-trackers (as opposed to hand coding from video), the <code>get_xy_timepoints</code> function returns a table including the x and y position across time.</p>
<div class="sourceCode" id="cb18"><html><body><pre class="r"><span class="no">d_xy_timepoints</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_xy_timepoints.html">get_xy_timepoints</a></span>()
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">d_xy_timepoints</span>)</pre></body></html></div>
<pre><code>## # A tibble: 6 x 6
##   xy_timepoint_id     x     y     t administration_id trial_id
##             &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;             &lt;int&gt;    &lt;int&gt;
## 1               0   364   602     0                60      256
## 2               1   365   601     8                60      256
## 3               2   378   596    16                60      256
## 4               3   386   599    25                60      256
## 5               4   390   596    33                60      256
## 6               5   387   600    41                60      256</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Mika Braginsky, Kyle MacDonald, Michael Frank.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
