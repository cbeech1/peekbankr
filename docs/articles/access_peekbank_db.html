<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Accessing `peekbank-db` • peekbankr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Accessing `peekbank-db`">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">peekbankr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/access_peekbank_db.html">Accessing `peekbank-db`</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/langcog/peekbankr">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Accessing <code>peekbank-db</code>
</h1>
            
            <h4 class="date">2019-09-25</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/langcog/peekbankr/blob/master/vignettes/access_peekbank_db.Rmd"><code>vignettes/access_peekbank_db.Rmd</code></a></small>
      <div class="hidden name"><code>access_peekbank_db.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>The <code>peekbankr</code> package allows you to access data in the peekbank-db from R. This removes the need to write complex SQL queries in order to get the information you want from the database. This vignette shows some examples of how to use the data loading functions and what the resulting data look like.</p>
<p>There are several different <code>get_</code> functions that you can use to extract different types of data from the peekbank-db:</p>
<ul>
<li><code><a href="../reference/get_datasets.html">get_datasets()</a></code></li>
<li><code><a href="../reference/get_subjects.html">get_subjects()</a></code></li>
<li><code><a href="../reference/get_trials.html">get_trials()</a></code></li>
<li><code><a href="../reference/get_aoi_regions.html">get_aoi_regions()</a></code></li>
<li><code><a href="../reference/get_aoi_data.html">get_aoi_data()</a></code></li>
<li><code><a href="../reference/get_xy_data.html">get_xy_data()</a></code></li>
</ul>
<p><strong>Technical note 1</strong>: You do not have to explicitly establish a connection to the peekbank-db since the <code>peekbankr</code> functions will manage these connections. But if you would like to establish your own connection, you can do so with <code><a href="../reference/connect_to_peekbank.html">connect_to_peekbank()</a></code> and pass it as an argument to any of the <code>get_</code> functions.</p>
<p><strong>Technical note 2</strong>: We have tried to optimize the time it takes to get data from the database. But if you try to query and get all of the tokens, it will take a long time.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># load the library</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(peekbankr)</span></code></pre></div>
</div>
<div id="get-datasets" class="section level2">
<h2 class="hasAnchor">
<a href="#get-datasets" class="anchor"></a>Get datasets</h2>
<p>The <code>get_datasets</code> function returns a table related to the sources of the dataset, information of the tracker, information of the method (e.g., monitor size and sample rate).</p>
<p>For example, you can run <code>get_datasets</code> without any arguments to return all of the datasets in the database.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>d_datasets &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_datasets.html">get_datasets</a></span>()</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(d_datasets)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 6
##   dataset_id monitor_size_x monitor_size_y sample_rate tracker
##        &lt;int&gt;          &lt;int&gt;          &lt;int&gt;       &lt;int&gt;   &lt;int&gt;
## 1          0             NA             NA          NA      NA
## 2          1             NA             NA          NA      NA
## # … with 1 more variable: lab_dataset_id &lt;chr&gt;</code></pre>
</div>
<div id="get-subjects" class="section level2">
<h2 class="hasAnchor">
<a href="#get-subjects" class="anchor"></a>Get Subjects</h2>
<p>The <code>get_subjects</code> function returns information about the subjects in the database. This includes information about:</p>
<ul>
<li>lab’s subject ID</li>
<li>language backgrounds (e.g., English learning children, monolingual children)</li>
<li>sex</li>
<li>age</li>
</ul>
<p>Again, if you run the function with no arguments, then you get all the information for all subjects in the database.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>d_subjects &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_subjects.html">get_subjects</a></span>()</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(d_subjects)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   subject_id   age sex   lab_subject_id
##        &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;         
## 1          0    46 F     319           
## 2          1    43 F     320           
## 3          2    47 M     321           
## 4          3    42 M     322           
## 5          4    43 M     323           
## 6          5    42 M     324</code></pre>
<p>The age argument takes a number indicating the age(s) of children (in months) that you want to analyze. you can use this argument in two ways</p>
<ol style="list-style-type: decimal">
<li>Pass a single number to information about all participants who were tested at that particular age.</li>
<li>Pass a range of ages to get information about all participants who were tested within a certain age range.</li>
</ol>
<p>For example, you can get the participant information for all of the children who were tested between the ages of 24 and 36 months.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>d_age_range &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_subjects.html">get_subjects</a></span>(<span class="dt">age =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">24</span>, <span class="dv">36</span>))</span>
<span id="cb6-2"><a href="#cb6-2"></a><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(d_age_range)</span></code></pre></div>
<pre><code>## # A tibble: 0 x 4
## # … with 4 variables: subject_id &lt;int&gt;, age &lt;int&gt;, sex &lt;chr&gt;,
## #   lab_subject_id &lt;chr&gt;</code></pre>
</div>
<div id="get-trials" class="section level2">
<h2 class="hasAnchor">
<a href="#get-trials" class="anchor"></a>Get trials</h2>
<p>The <code>get_trials</code> function returns a table with information of the trials in the experiments in the database. This includes the following information:</p>
<p><em>Target image </em>Distractor image <em>Target side </em>Language of the stimuli <em>Target label </em>Distractor label <em>Full phrase of the audio file played for that trial </em>Point of disambiguation</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>d_trials &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_trials.html">get_trials</a></span>()</span>
<span id="cb8-2"><a href="#cb8-2"></a></span>
<span id="cb8-3"><a href="#cb8-3"></a><span class="co"># view the structure of the data</span></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co">#str(d_trials)</span></span>
<span id="cb8-5"><a href="#cb8-5"></a></span>
<span id="cb8-6"><a href="#cb8-6"></a><span class="co"># print the unique trials in a particular dataset?</span></span>
<span id="cb8-7"><a href="#cb8-7"></a><span class="co">#unique(d_trials$)</span></span></code></pre></div>
</div>
<div id="get-aoi-regions" class="section level2">
<h2 class="hasAnchor">
<a href="#get-aoi-regions" class="anchor"></a>Get AOI regions</h2>
<p>The <code><a href="../reference/get_aoi_regions.html">get_aoi_regions()</a></code> returning a table with the information of the region of area of interest (AOI) for experiments using eye-trackers. It includes information of the dimensions of the x and y, such as the minimum and maximum dimension of the xy spaces.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>d_aoi_region &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_aoi_regions.html">get_aoi_regions</a></span>()</span></code></pre></div>
</div>
<div id="get-aoi-data" class="section level2">
<h2 class="hasAnchor">
<a href="#get-aoi-data" class="anchor"></a>Get AOI data</h2>
<p>The <code>get_aoi_data</code> function returns a table with information of the subject’s looking behavior in each trial. For example, you can get information about which area that the subject was looking at in a particular trial (e.g., looking away or target or distractor).</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>d_aoi_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_aoi_data.html">get_aoi_data</a></span>()</span>
<span id="cb10-2"><a href="#cb10-2"></a></span>
<span id="cb10-3"><a href="#cb10-3"></a><span class="co"># view the structure of the data</span></span>
<span id="cb10-4"><a href="#cb10-4"></a><span class="kw"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(d_aoi_data)</span></code></pre></div>
<pre><code>## Classes 'tbl_df', 'tbl' and 'data.frame':    1536511 obs. of  23 variables:
##  $ aoi_data_id            : int  0 64 335 750 845 957 1021 1292 1707 1802 ...
##  $ aoi                    : chr  "target" "target" "distractor" "target" ...
##  $ t                      : int  -990 -990 -990 -990 -990 -957 -957 -957 -957 -957 ...
##  $ subject_id             : int  0 4 21 47 53 0 4 21 47 53 ...
##  $ trial_id               : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ lab_trial_id           : chr  "SwitchingCues-CN1A-2" "SwitchingCues-CN1A-2" "SwitchingCues-CN1A-2" "SwitchingCues-CN1A-2" ...
##  $ distractor_image       : chr  "crib" "crib" "crib" "crib" ...
##  $ distractor_label       : chr  "crib" "crib" "crib" "crib" ...
##  $ full_phrase            : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ point_of_disambiguation: int  1024 1024 1024 1024 1024 1024 1024 1024 1024 1024 ...
##  $ target_image           : chr  "slide" "slide" "slide" "slide" ...
##  $ target_label           : chr  "slide" "slide" "slide" "slide" ...
##  $ target_side            : chr  "r" "r" "r" "r" ...
##  $ aoi_region             : int  -1 -1 -1 -1 -1 -1 -1 -1 -1 -1 ...
##  $ dataset_id             : int  0 0 0 0 0 0 0 0 0 0 ...
##  $ monitor_size_x         : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ monitor_size_y         : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ sample_rate            : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ tracker                : int  NA NA NA NA NA NA NA NA NA NA ...
##  $ lab_dataset_id         : chr  "pomper_saffran_2016" "pomper_saffran_2016" "pomper_saffran_2016" "pomper_saffran_2016" ...
##  $ age                    : int  46 43 45 44 44 46 43 45 44 44 ...
##  $ sex                    : chr  "F" "M" "M" "M" ...
##  $ lab_subject_id         : chr  "319" "323" "341" "369" ...</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="co">#proportion of looking at the target</span></span></code></pre></div>
</div>
<div id="get-xy-data" class="section level2">
<h2 class="hasAnchor">
<a href="#get-xy-data" class="anchor"></a>Get XY data</h2>
<p>For experiments using eye-trackers, the <code><a href="../reference/get_xy_data.html">get_xy_data()</a></code> function returns a table information of ________</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>d_xy_data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/get_xy_data.html">get_xy_data</a></span>()</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#overview">Overview</a></li>
      <li><a href="#get-datasets">Get datasets</a></li>
      <li><a href="#get-subjects">Get Subjects</a></li>
      <li><a href="#get-trials">Get trials</a></li>
      <li><a href="#get-aoi-regions">Get AOI regions</a></li>
      <li><a href="#get-aoi-data">Get AOI data</a></li>
      <li><a href="#get-xy-data">Get XY data</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Mika Braginsky, Kyle MacDonald.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
