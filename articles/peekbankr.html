<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Accessing `peekbank-db` • peekbankr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Accessing `peekbank-db`">
<meta property="og:description" content="peekbankr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">peekbankr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1.9002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/peekbankr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://github.com/langcog/peekbankr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="peekbankr_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Accessing <code>peekbank-db</code>
</h1>
            
            <h4 class="date">2021-06-15</h4>
      
      <small class="dont-index">Source: <a href="http://github.com/langcog/peekbankr/blob/master/vignettes/peekbankr.Rmd"><code>vignettes/peekbankr.Rmd</code></a></small>
      <div class="hidden name"><code>peekbankr.Rmd</code></div>

    </div>

    
    
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>The <code>peekbankr</code> package allows you to access data in the peekbank-db from R. This removes the need to write complex SQL queries in order to get the information you want from the database. This vignette shows some examples of how to use the data loading functions and what the resulting data look like.</p>
<p>There are several different <code>get_</code> functions that you can use to extract different types of data from the peekbank-db:</p>
<ul>
<li><code><a href="../reference/get_datasets.html">get_datasets()</a></code></li>
<li><code><a href="../reference/get_subjects.html">get_subjects()</a></code></li>
<li><code><a href="../reference/get_administrations.html">get_administrations()</a></code></li>
<li><code><a href="../reference/get_trials.html">get_trials()</a></code></li>
<li><code><a href="../reference/get_stimuli.html">get_stimuli()</a></code></li>
<li><code><a href="../reference/get_aoi_region_sets.html">get_aoi_region_sets()</a></code></li>
<li><code><a href="../reference/get_aoi_timepoints.html">get_aoi_timepoints()</a></code></li>
<li><code><a href="../reference/get_xy_timepoints.html">get_xy_timepoints()</a></code></li>
</ul>
<p><strong>Technical note 1</strong>: You do not have to explicitly establish a connection to the peekbank-db since the <code>peekbankr</code> functions will manage these connections. But if you would like to establish your own connection, you can do so with <code><a href="../reference/connect_to_peekbank.html">connect_to_peekbank()</a></code> and pass it as an argument to any of the <code>get_</code> functions.</p>
<p><strong>Technical note 2</strong>: We have tried to optimize the time it takes to get data from the database. But if you try to query and get all of the timepoint tables, it will still take a long time as you are trying to get 100s of MB of data.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load the library</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://github.com/langcog/peekbankr">peekbankr</a></span><span class="op">)</span></code></pre></div>
</div>
<div id="get-datasets" class="section level2">
<h2 class="hasAnchor">
<a href="#get-datasets" class="anchor"></a>Get datasets</h2>
<p>The <code>get_datasets</code> function returns a table related to the sources of the dataset, information of the tracker, information of the method (e.g., monitor size and sample rate).</p>
<p>For example, you can run <code>get_datasets</code> without any arguments to return all of the datasets in the database.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">d_datasets</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_datasets.html">get_datasets</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## Using current database version: 'peekbank'.</code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">d_datasets</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 5
##   dataset_id lab_dataset_id   dataset_name   shortcite    cite                  
##        &lt;int&gt; &lt;chr&gt;            &lt;chr&gt;          &lt;chr&gt;        &lt;chr&gt;                 
## 1          0 casillas_tselta… casillas_tsel… Casillas et… "Casillas, M., Brown,…
## 2          1 perry_cowpig     perry_cowpig   Perry &amp; Saf… "Perry, L. K., &amp; Saff…
## 3          2 SwitchingCues    pomper_saffra… Pomper &amp; Sa… "Pomper, R., &amp; Saffra…
## 4          3 adams_marchman_… adams_marchma… Adams et al… "Adams, K. A., Marchm…
## 5          4 pomper_salientme pomper_salien… Pomper &amp; Sa… "Pomper, R., &amp; Saffra…
## 6          5 mon2             swingley_asli… Swingley &amp; … "Swingley, D., &amp; Asli…</code></pre>
</div>
<div id="get-subjects" class="section level2">
<h2 class="hasAnchor">
<a href="#get-subjects" class="anchor"></a>Get Subjects</h2>
<p>The <code>get_subjects</code> function returns information about persistent subject identifiers for noting when subjects have participated in multiple experiments. This includes demographic information (currently only sex and lab-specific subject id).</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">d_subjects</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_subjects.html">get_subjects</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## Using current database version: 'peekbank'.</code></pre>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">d_subjects</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   subject_id sex    native_language lab_subject_id
##        &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;           &lt;chr&gt;         
## 1          0 male   other           P3-14moM      
## 2          1 male   other           P14-22moM     
## 3          2 male   other           P14-45moM     
## 4          3 female other           P16-22moF     
## 5          4 female other           P16-45moF     
## 6          5 female other           P19-27moF</code></pre>
</div>
<div id="get-administrations" class="section level2">
<h2 class="hasAnchor">
<a href="#get-administrations" class="anchor"></a>Get Administrations</h2>
<p>The <code>get_administrations</code> function returns information about the specific experimental administrations to subjects in the database. This includes information about:</p>
<ul>
<li>age</li>
<li>monitor size</li>
<li>tracker</li>
</ul>
<p>Again, if you run the function with no arguments, then you get all the information for all administrations in the database, but you can now also filter on a dataset name or dataset id.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">d_administrations</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_administrations.html">get_administrations</a></span><span class="op">(</span>dataset_name <span class="op">=</span> <span class="st">"pomper_saffran_2016"</span><span class="op">)</span></code></pre></div>
<pre><code>## Using current database version: 'peekbank'.</code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">d_administrations</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 12
##   administration_id   age lab_age lab_age_units monitor_size_x monitor_size_y
##               &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;                  &lt;int&gt;          &lt;int&gt;
## 1                68    46      46 months                    NA             NA
## 2                69    43      43 months                    NA             NA
## 3                70    47      47 months                    NA             NA
## 4                71    42      42 months                    NA             NA
## 5                72    43      43 months                    NA             NA
## 6                73    42      42 months                    NA             NA
## # … with 6 more variables: sample_rate &lt;dbl&gt;, tracker &lt;chr&gt;,
## #   coding_method &lt;chr&gt;, dataset_id &lt;int&gt;, subject_id &lt;int&gt;, dataset_name &lt;chr&gt;</code></pre>
<p>The age argument takes a number indicating the age(s) of children (in months) that you want to analyze. you can use this argument in two ways</p>
<ol style="list-style-type: decimal">
<li>Pass a single number to get information about all participants who were tested at that particular age.</li>
<li>Pass a range of ages to get information about all participants who were tested within a certain age range.</li>
</ol>
<p>For example, you can get the participant information for all of the children who were tested between the ages of 24 and 36 months.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">d_age_range</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_administrations.html">get_administrations</a></span><span class="op">(</span>age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">24</span>, <span class="fl">36</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## Using current database version: 'peekbank'.</code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">d_age_range</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 12
##   administration_id   age lab_age lab_age_units monitor_size_x monitor_size_y
##               &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;                  &lt;int&gt;          &lt;int&gt;
## 1                 5    27      27 months                  1366            768
## 2                 7    25      25 months                  1366            768
## 3                14    29      29 months                  1366            768
## 4                17    32      32 months                  1366            768
## 5                18    32      32 months                  1366            768
## 6                19    35      35 months                  1366            768
## # … with 6 more variables: sample_rate &lt;dbl&gt;, tracker &lt;chr&gt;,
## #   coding_method &lt;chr&gt;, dataset_id &lt;int&gt;, subject_id &lt;int&gt;, dataset_name &lt;chr&gt;</code></pre>
</div>
<div id="get-trials" class="section level2">
<h2 class="hasAnchor">
<a href="#get-trials" class="anchor"></a>Get trials</h2>
<p>The <code>get_trials</code> function returns a table with information of the trials in the experiments in the database. This includes the following information:</p>
<ul>
<li>Phrase</li>
<li>Language</li>
<li>Point of disambiguation</li>
<li>IDs to link to other tables.</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">d_trials</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_trials.html">get_trials</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## Using current database version: 'peekbank'.</code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">d_trials</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 5
##   trial_id trial_order trial_type_id dataset_id dataset_name       
##      &lt;int&gt;       &lt;int&gt;         &lt;int&gt;      &lt;int&gt; &lt;chr&gt;              
## 1      458           1           179          3 adams_marchman_2018
## 2      459           2           180          3 adams_marchman_2018
## 3      460           3           181          3 adams_marchman_2018
## 4      461           4           182          3 adams_marchman_2018
## 5      462           5           183          3 adams_marchman_2018
## 6      463           6           184          3 adams_marchman_2018</code></pre>
<p>This function also takes dataset name and id filters.</p>
</div>
<div id="get-stimuli" class="section level2">
<h2 class="hasAnchor">
<a href="#get-stimuli" class="anchor"></a>Get stimuli</h2>
<p>The <code>get_stimuli</code> function returns a table with information of the stimuli in the experiments in the database. This includes the following information:</p>
<ul>
<li>Label</li>
<li>Image</li>
<li>Novelty status</li>
</ul>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">d_stimuli</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_stimuli.html">get_stimuli</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## Using current database version: 'peekbank'.</code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">d_stimuli</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 10
##   stimulus_id stimulus_novelty original_stimulus_label english_stimulus_label
##         &lt;int&gt; &lt;chr&gt;            &lt;chr&gt;                   &lt;chr&gt;                 
## 1         118 familiar         baby                    baby                  
## 2         119 familiar         car                     car                   
## 3         120 familiar         ball                    ball                  
## 4         121 familiar         doggy                   doggy                 
## 5         122 familiar         shoe                    shoe                  
## 6         123 familiar         birdie                  birdie                
## # … with 6 more variables: stimulus_image_path &lt;chr&gt;, lab_stimulus_id &lt;chr&gt;,
## #   dataset_id &lt;int&gt;, image_description &lt;chr&gt;, image_description_source &lt;chr&gt;,
## #   dataset_name &lt;chr&gt;</code></pre>
<p>This function also takes dataset name and id filters.</p>
</div>
<div id="get-aoi-region-sets" class="section level2">
<h2 class="hasAnchor">
<a href="#get-aoi-region-sets" class="anchor"></a>Get AOI region sets</h2>
<p>The <code><a href="../reference/get_aoi_region_sets.html">get_aoi_region_sets()</a></code> returning a table with the information of the region of area of interest (AOI) for experiments using eye-trackers. It includes information of the dimensions of the x and y, such as the minimum and maximum dimension of the xy spaces.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">d_aoi_region_sets</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_aoi_region_sets.html">get_aoi_region_sets</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## Using current database version: 'peekbank'.</code></pre>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">d_aoi_region_sets</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 9
##   aoi_region_set_id l_x_max l_x_min l_y_max l_y_min r_x_max r_x_min r_y_max
##               &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;   &lt;int&gt;
## 1                 0     395     359     754     359    1366     971     754
## 2                 1     715       3     917     142    1679     967     921
## 3                 2     710       0     911     146    1676     982     906
## 4                 3     701       3     918     121    1676     978     923
## 5                 4     706       0     927     138    1681     982     925
## 6                 5     699       2     923     133    1680     982     923
## # … with 1 more variable: r_y_min &lt;int&gt;</code></pre>
<p>This function is not expected to be used commonly - this information is retained as part of the process of calculating AOIs from XY points.</p>
</div>
<div id="get-aoi-timepoints" class="section level2">
<h2 class="hasAnchor">
<a href="#get-aoi-timepoints" class="anchor"></a>Get AOI timepoints</h2>
<p>The <code><a href="../reference/get_aoi_timepoints.html">get_aoi_timepoints()</a></code> function returns a table with information of the subject’s looking behavior in each trial. For example, you can get information about which area that the subject was looking at in a particular trial (e.g., looking away or target or distractor).</p>
<p>The <code>t_norm</code> field provides a trial-normalized time variable (milliseconds) whose 0 point is the point of disambiguation on that trial (first timestep of the onset of the first time the target label is said).</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">d_aoi_timepoints</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_aoi_timepoints.html">get_aoi_timepoints</a></span><span class="op">(</span>dataset_name <span class="op">=</span> <span class="st">"pomper_saffran_2016"</span><span class="op">)</span></code></pre></div>
<pre><code>## Using current database version: 'peekbank'.</code></pre>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">d_aoi_timepoints</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   administration_id trial_id aoi    t_norm
##               &lt;int&gt;    &lt;int&gt; &lt;chr&gt;   &lt;dbl&gt;
## 1                68      202 target  -1000
## 2                68      202 target   -975
## 3                68      202 target   -950
## 4                68      202 target   -925
## 5                68      202 target   -900
## 6                68      202 target   -875</code></pre>
</div>
<div id="get-xy-timepoints" class="section level2">
<h2 class="hasAnchor">
<a href="#get-xy-timepoints" class="anchor"></a>Get XY timepoints</h2>
<p>For experiments using eye-trackers (as opposed to hand coding from video), the <code>get_xy_timepoints</code> function returns a table including the x and y position across time.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">d_xy_timepoints</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_xy_timepoints.html">get_xy_timepoints</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Mika Braginsky, Kyle MacDonald, Michael Frank.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
